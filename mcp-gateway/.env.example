# Server Configuration
NODE_ENV=development
PORT=4000
WS_PORT=4001
HOST=0.0.0.0
LOG_LEVEL=info

# JWT Configuration
JWT_SECRET=your-jwt-secret-min-32-chars
JWT_ISSUER=zentoria-auth
JWT_AUDIENCE=zentoria-mcp
JWT_EXPIRES_IN=1h

# SEC-010: Refresh Token Configuration
# Refresh tokens are stored in Redis and rotated on each use
REFRESH_TOKEN_EXPIRY_DAYS=7

# Database (PostgreSQL)
DATABASE_URL=postgresql://zentoria:password@postgres:5432/mcp_gateway?schema=public

# Redis
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=

# Redis TLS (SEC-008)
# Set REDIS_TLS=true or use rediss:// URL to enable TLS
REDIS_TLS=false
# Path to CA certificate (optional, for custom CA)
# REDIS_TLS_CA_CERT=/path/to/ca.crt
# Client certificate for mutual TLS (optional)
# REDIS_TLS_CERT=/path/to/client.crt
# REDIS_TLS_KEY=/path/to/client.key
# Set to false to allow self-signed certs (dev only, insecure)
REDIS_TLS_REJECT_UNAUTHORIZED=true

# MinIO (S3-compatible storage)
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=zentoria-files
MINIO_USE_SSL=false

# Service URLs
AUTH_SERVICE_URL=http://auth-service:4009
AI_ORCHESTRATOR_URL=http://ai-orchestrator:4005
VAULT_URL=http://vault:8200
N8N_URL=http://n8n:5678

# Vault Configuration
VAULT_TOKEN=your-vault-token
VAULT_SECRETS_PATH=secret/data/mcp-gateway

# Email (SMTP)
SMTP_HOST=smtp.zentoria.local
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@zentoria.ai

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# File Upload
MAX_FILE_SIZE_MB=100
ALLOWED_MIME_TYPES=application/pdf,image/*,text/*,application/json

# Circuit Breaker
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=30000
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=60000

# PERF-009: Bulkhead Configuration (per-service concurrency limits)
# Default bulkhead limits (applied to unknown services)
BULKHEAD_MAX_CONCURRENT=10
BULKHEAD_MAX_QUEUE=100
# AI Orchestrator - higher limits for streaming
BULKHEAD_AI_MAX_CONCURRENT=20
BULKHEAD_AI_MAX_QUEUE=200
# Auth service - fast requests, lower concurrency OK
BULKHEAD_AUTH_MAX_CONCURRENT=10
BULKHEAD_AUTH_MAX_QUEUE=50
# n8n workflow service - workflows can be slow
BULKHEAD_N8N_MAX_CONCURRENT=5
BULKHEAD_N8N_MAX_QUEUE=50

# Audit Log Encryption (SEC-009)
# Minimum 32 characters. If not set, audit logs are stored unencrypted.
# AUDIT_ENCRYPTION_KEY=your-secure-key-minimum-32-characters-long

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# ARCH-003: OpenTelemetry Configuration
# Set OTEL_ENABLED=false to disable tracing entirely
OTEL_ENABLED=true
OTEL_SERVICE_NAME=mcp-gateway
OTEL_SERVICE_VERSION=1.0.0
# OTLP exporter endpoint (Jaeger, Grafana Tempo, etc.)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# Optional: separate endpoints for traces and metrics
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://localhost:4318/v1/traces
# OTEL_EXPORTER_OTLP_METRICS_ENDPOINT=http://localhost:4318/v1/metrics
# Optional: custom headers for authentication
# OTEL_EXPORTER_OTLP_HEADERS=Authorization=Bearer token123
# Metrics export interval (ms)
OTEL_METRICS_EXPORT_INTERVAL_MS=60000
